<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.phgym.admin.model.AdminMapper">


	<!-- 관리자 정보 가져오기  -->
	<select id="getAdminAccount" parameterType="int" resultType="com.phgym.admin.model.AdminAccountDTO">
    	SELECT admin_name, admin_birth, admin_gender, admin_phone, admin_id, admin_job_title, admin_hire_date, admin_email, admin_career_his 
    	FROM admin_info 
    	WHERE admin_no = #{adminNo}
	</select>
	
		<!-- 유저 아이디 가져오기 -->
	<select id="getUserId" parameterType="String" resultType="int">
    	SELECT user_no
    	FROM user_info
    	WHERE user_name = #{userName}
	</select>
	
	<!-- 관리자 정보 가져오기  -->
	<select id="getAdminAccountForUserId" parameterType="int" resultType="com.phgym.admin.model.AdminAccountDTO">
		SELECT a.admin_name, a.admin_birth, a.admin_gender, a.admin_phone, a.admin_id, a.admin_job_title, a.admin_hire_date, a.admin_email, a.admin_career_his 
    	FROM admin_info a 
    	JOIN pt_pay_his p
    	ON a.admin_no = p.admin_no
    	WHERE p.user_no = #{userNo}
	</select>
	
	<!-- 관리자 정보 수정하기 -->
	<update  id="modifyAdminAccount" parameterType="com.phgym.admin.model.AdminAccountDTO" >
		UPDATE admin_info
		SET admin_name = #{adminName}, admin_birth = #{adminBirth} , 
		admin_gender =  #{adminGender}, admin_phone =  #{adminPhone}, admin_id =  #{adminId}, 
		admin_job_title = #{adminJobTitle}, admin_hire_date =  #{adminHireDate}, admin_email =  #{adminEmail}, admin_career_his =  #{adminCareerHis}
		WHERE admin_no = #{adminNo}	
	</update>
	
	<!-- 유저 정보 가져오기 -->
	<select id="getUserAccount" parameterType="String" resultType="com.phgym.admin.model.UserAccountDTO">
		SELECT user_no, user_id, user_name, user_Birth, user_email, user_address, user_Gender, user_Phone, user_reg_date
		FROM user_info
		WHERE user_name = #{userName}
	</select>
	
	<select id="getUserAccount2" parameterType="int" resultType="com.phgym.admin.model.UserAccountDTO">
		SELECT user_no, user_id, user_name, user_Birth, user_email, user_address, user_Gender, user_Phone, user_reg_date
		FROM user_info
		WHERE user_no = #{userNo}
	</select>
	
	<!-- 관리자 본인 스케쥴 확인하기 -->
	<select id="getTrainerPtCheck" parameterType="int" resultType="com.phgym.mypage.model.PtReservationHisDTO">
		SELECT p.admin_no, p.user_no, u.user_name, p.reservation_date, p.progress_status, p.content
		FROM user_info u
		JOIN pt_reservation_his p
		ON u.user_no = p.user_no
		WHERE p.admin_no = #{adminNo}
	</select>
	
	
	
</mapper>